/**
 * Angumate - Animations for Angular.js
 *
 * @author Maximilian Hoffmann http://maximilianhoffmann.com
 */var angumate=angular.module("Angumate",[]);angumate.factory("elements",function(){var e=[];return{add:function(t){e.push(t)},get:function(){return e},clear:function(){e=[]}}});angumate.factory("angumate",["$q",function(e){"use strict";var t;return{wait:function(){t=e.defer()},promise:function(){return t===undefined?!0:t.promise},resolve:function(){t.resolve()},support:function(){function e(e,t){var n=document.body||document.documentElement,r=n.style;if(typeof r=="undefined")return!1;if(typeof r[e]=="string")return t?[e,e]:!0;var i=["moz","Webkit","Khtml","O","ms","Icab"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var s=0;s<i.length;s++)if(typeof r[i[s]+e]=="string")return t?[i[s]+e,"-"+i[s].toLowerCase()+"-"+e.toLowerCase()]:!0}return e("transition")&&e("transform")?{transition:e("transition",!0),transitionDuration:e("transitionDuration",!0),transitionDelay:e("transitionDelay",!0),transform:e("transform",!0)}:!1}()}}]);angumate.service("animations",function(){function e(e,t){var n=document.body||document.documentElement,r=n.style;if(typeof r=="undefined")return!1;if(typeof r[e]=="string")return t?[e,e]:!0;var i=["moz","Webkit","Khtml","O","ms","Icab"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var s=0;s<i.length;s++)if(typeof r[i[s]+e]=="string")return t?[i[s]+e,"-"+i[s].toLowerCase()+"-"+e.toLowerCase()]:!0}this.supported=!1;if(e("transition")&&e("transform")){this.transition=e("transition",!0);this.transitionDuration=e("transitionDuration",!0);this.transitionDelay=e("transitionDelay",!0);this.transform=e("transform",!0);this.supported=!0}});angumate.run(["$rootScope","$timeout","angumate","elements",function(e,t,n,r){e.$on("$routeChangeStart",function(e,i,s){console.log("start");n.wait();var o=300,u=0;angular.forEach(r.get(),function(e){e.css(n.support.transitionDuration[0],o+"ms").css(n.support.transitionDelay[0],e.delay+"ms").css(e.animation);e.delay>u&&(u=e.delay)});t(function(){n.resolve()},o+u)});e.$on("$routeChangeSuccess",function(e,t,n){console.log("success");r.clear()})}]);angumate.directive("amClip",["$timeout","animations","elements",function(e,t,n){"use strict";if(!t.supported)return!1;var r={up:"translateY(100%)",down:"translateY(-100%)",left:"translateX(-100%)",right:"translateX(100%)"};return{compile:function(i,s,o){var u;i.children().length||i.html('<span style="visibility: hidden">'+i.html()+"</span>");i.css("overflow","hidden");u=i.children();u.css("display","inline-block").css(t.transition[0],t.transform[1]+" .8s ease "+(+s.amDelay||0)+"ms").css(t.transform[0],r[s.amClip||"up"]);u.animation={};u.animation[t.transform[0]]=r[s.amClip||"up"];u.delay=+s.amDelay/2||0;n.add(u);e(function(){u.css("visibility",null).css(t.transform[1],null)},0)}}}]);angumate.directive("amFade",["$timeout","animations","elements",function(e,t,n){"use strict";return t.supported?{compile:function(r,i,s){var o=r;o.css("opacity",0);o.animation={opacity:0};o.delay=+i.amDelay/2||0;n.add(o);e(function(){o.css(t.transition[0],"opacity .8s ease "+(+i.amDelay||0)+"ms");o.css("opacity",null)},0)}}:!1}]);